<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<title data-react-helmet="true">macOS instructions | Comm docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://andnasnd.github.io/dev_environment"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="macOS instructions | Comm docs"><meta data-react-helmet="true" name="description" content="Xcode"><meta data-react-helmet="true" property="og:description" content="Xcode"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://andnasnd.github.io/dev_environment"><link data-react-helmet="true" rel="alternate" href="https://andnasnd.github.io/dev_environment" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://andnasnd.github.io/dev_environment" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.7b507170.css">
<link rel="preload" href="/assets/js/runtime~main.240d7005.js" as="script">
<link rel="preload" href="/assets/js/main.979eff03.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/appicon3x.png" alt="Comm Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/appicon3x.png" alt="Comm Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Comm docs</b></a><a class="navbar__item navbar__link navbar__link--active" href="/">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/CommE2E/comm" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">🌜</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">🌞</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Requirements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/dev_environment">Instructions (macOS)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/linux_dev_environment">Instructions (Linux)</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>macOS instructions</h1></header><header><h1>Prerequisites</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="xcode">Xcode<a aria-hidden="true" class="hash-link" href="#xcode" title="Direct link to heading">​</a></h2><p>Go to the <a href="https://apps.apple.com/us/app/xcode/id497799835" target="_blank" rel="noopener noreferrer">Mac App Store</a> to install Xcode, or if you already have it, to update it to the latest version.</p><p>Once Xcode is installed, open it up. If you are prompted, follow the instructions to install any “Additional Required Components”.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>You need to make sure that the “Command Line Tools” are installed. Go to Xcode → Preferences → Locations, and then install the tools by selecting the most recent version from the Command Line Tools dropdown.</p></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="homebrew">Homebrew<a aria-hidden="true" class="hash-link" href="#homebrew" title="Direct link to heading">​</a></h2><p>Install <a href="https://brew.sh/" target="_blank" rel="noopener noreferrer">Homebrew</a>, a package manager for macOS.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="node">Node<a aria-hidden="true" class="hash-link" href="#node" title="Direct link to heading">​</a></h2><p>Next, install <a href="https://nodejs.org/" target="_blank" rel="noopener noreferrer">Node</a> using Homebrew.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">brew install node; brew upgrade node</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The reason we use both <code>install</code> and <code>upgrade</code> is that there’s no single Homebrew command equivalent to “install if not installed, and upgrade if already installed”.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="php">PHP<a aria-hidden="true" class="hash-link" href="#php" title="Direct link to heading">​</a></h2><p><a href="https://www.php.net" target="_blank" rel="noopener noreferrer">PHP</a> is needed for Arcanist. As of macOS 12 (Monterey), PHP is no longer bundled with the OS and needs to be installed via Homebrew.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">brew install php; brew upgrade php</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="yarn">Yarn<a aria-hidden="true" class="hash-link" href="#yarn" title="Direct link to heading">​</a></h2><p>We use the <a href="https://yarnpkg.com/" target="_blank" rel="noopener noreferrer">Yarn</a> package manager for JavaScript in our repo.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">brew install yarn; brew upgrade yarn</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="watchman">Watchman<a aria-hidden="true" class="hash-link" href="#watchman" title="Direct link to heading">​</a></h2><p>Watchman is a tool from Facebook used in the React Native dev environment to watch for changes to your filesystem.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">brew install watchman; brew upgrade watchman</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="node-version-manager">Node Version Manager<a aria-hidden="true" class="hash-link" href="#node-version-manager" title="Direct link to heading">​</a></h2><p>Node Version Manager (nvm) is a tool that ensures we use the same version of Node on our server between prod and dev environments.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">brew install nvm; brew upgrade nvm</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>After installing, Homebrew will print out some instructions under the Caveats section of its output. It will ask you to do two things: <code>mkdir ~/.nvm</code>, and to add some lines to your <code>~/.bash_profile</code> (or desired shell configuration file):</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">export NVM_DIR=&quot;$HOME/.nvm&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ -s &quot;/usr/local/opt/nvm/nvm.sh&quot; ] &amp;&amp; . &quot;/usr/local/opt/nvm/nvm.sh&quot; --no-use # This loads nvm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ -s &quot;/usr/local/opt/nvm/etc/bash_completion.d/nvm&quot; ] &amp;&amp; . &quot;/usr/local/opt/nvm/etc/bash_completion.d/nvm&quot;  # This loads nvm bash_completion</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Now either close and reopen your terminal window or re-source your shell configuration file in order to load nvm:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">source ~/.bash_profile</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>We still haven&#x27;t gotten our dev environment to work with Node 17 due to an issue affecting the <code>sharp</code> module on M1 Macs. For that reason, you&#x27;ll need to make sure your system is defaulting to an earlier version of Node:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">nvm alias default 16</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="mysql">MySQL<a aria-hidden="true" class="hash-link" href="#mysql" title="Direct link to heading">​</a></h2><p>For now we’re using MySQL 5.7 as the primary server-side database. Hopefully we’ll change this soon, but for now, install MySQL 5.7 using Homebrew.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">brew install mysql@5.7; brew upgrade mysql@5.7</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Next we’ll configure MySQL to start when your computer boots using <code>brew services</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">brew tap homebrew/services</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew services start mysql@5.7</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>We’ll also want to link MySQL so that you can run CLI commands:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">brew link mysql@5.7 --force</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Finally, you should set up a root password for your local MySQL instance:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">mysqladmin -u root password</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="redis">Redis<a aria-hidden="true" class="hash-link" href="#redis" title="Direct link to heading">​</a></h2><p>We use Redis on the server side as a message broker.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">brew install redis; brew upgrade redis</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>We’ll set it up to start on boot with <code>brew services</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">brew services start redis</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="cocoapods">CocoaPods<a aria-hidden="true" class="hash-link" href="#cocoapods" title="Direct link to heading">​</a></h2><p>CocoaPods is a dependency management system for iOS development. React Native uses it to manage native modules.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">brew install cocoapods; brew upgrade cocoapods</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="reactotron">Reactotron<a aria-hidden="true" class="hash-link" href="#reactotron" title="Direct link to heading">​</a></h2><p>Reactotron is an event tracker and logger that can be used to aid in debugging on React Native.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">brew install reactotron; brew upgrade reactotron</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="flipper">Flipper<a aria-hidden="true" class="hash-link" href="#flipper" title="Direct link to heading">​</a></h2><p>Flipper is a debugging tool for mobile applications from Facebook. We use it for JavaScript debugging using the Hermes runtime, and also use several plugins such as the React Dev Tools. You can download the latest version of Flipper for MacOS <a href="https://www.facebook.com/fbflipper/public/mac" target="_blank" rel="noopener noreferrer">here</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="flipper-plugins">Flipper plugins<a aria-hidden="true" class="hash-link" href="#flipper-plugins" title="Direct link to heading">​</a></h3><p>Flipper has a plugin system that allows teams to integrate additional debugging tools into Flipper. We currently only use one plugin, which is for monitoring Redux state.</p><p>To install it, open Flipper and go to View → Manage Plugins. Type in &quot;redux-debugger&quot; and install the Flipper plugin with that name.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="idb">idb<a aria-hidden="true" class="hash-link" href="#idb" title="Direct link to heading">​</a></h2><p>Flipper relies on Facebook’s idb tool to debug iOS apps running on your device. We’ll need to install it:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">brew tap facebook/fb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew install idb-companion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pip3 install --user --upgrade fb-idb</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Since we run <code>pip3 install</code> with <code>--user</code> instead of running it with <code>sudo</code>, the <code>idb</code> executable gets installed in your userdir. For me, running MacOS with Python 3.9, it got installed in <code>~/Library/Python/3.9/bin/idb</code>. For Flipper to be able to talk to <code>idb</code>, you’ll need to set the IDB Binary Location in the Flipper Settings (File → Preferences).</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>If you have trouble getting Flipper to work with a physical iOS device, it may be due to Python weirdness. The above steps have been tested with Python 3.9 sourced from Homebrew. Let <a href="mailto:support@comm.app" target="_blank" rel="noopener noreferrer">@commsupport</a> know if you have any trouble!</p></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="react-dev-tools-chrome-extension">React Dev Tools Chrome extension<a aria-hidden="true" class="hash-link" href="#react-dev-tools-chrome-extension" title="Direct link to heading">​</a></h2><p>The React Dev Tools Chrome extension lets you inspect the React component tree for web applications in Chrome. You can install it by navigating <a href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi" target="_blank" rel="noopener noreferrer">here</a> on Chrome.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="redux-dev-tools-chrome-extension">Redux Dev Tools Chrome extension<a aria-hidden="true" class="hash-link" href="#redux-dev-tools-chrome-extension" title="Direct link to heading">​</a></h2><p>The Redux Dev Tools Chrome extension lets you watch for Redux actions and inspect the Redux store state, both for web applications in Chrome, but also for our native applications using the “Remote DevTools” functionality. To install it, navigate <a href="https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd" target="_blank" rel="noopener noreferrer">here</a> on Chrome.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="jdk">JDK<a aria-hidden="true" class="hash-link" href="#jdk" title="Direct link to heading">​</a></h2><p>We’ll need the Java Development Kit for Android development.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">brew install adoptopenjdk/openjdk/adoptopenjdk11; brew upgrade adoptopenjdk/openjdk/adoptopenjdk11</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>We should also make sure to set up the <code>$JAVA_HOME</code> environment variable to point to our new JDK. Append the following line to your <code>~/.bash_profile</code> (or desired shell configuration file):</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">export JAVA_HOME=$(/usr/libexec/java_home)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="android-studio">Android Studio<a aria-hidden="true" class="hash-link" href="#android-studio" title="Direct link to heading">​</a></h2><p>Start by downloading and installing <a href="https://developer.android.com/studio/index.html" target="_blank" rel="noopener noreferrer">Android Studio</a>. When prompted to choose an installation type, select “Custom”. Make sure you check the boxes for the following:</p><ul><li><code>Android SDK</code></li><li><code>Android SDK Platform</code></li><li><code>Performance (Intel ® HAXM)</code></li><li><code>Android Virtual Device</code></li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="android-sdk">Android SDK<a aria-hidden="true" class="hash-link" href="#android-sdk" title="Direct link to heading">​</a></h3><p>Android Studio installs the latest Android SDK by default, but since React Native uses the Android 10 SDK specifically, we’ll need to install it using Android Studio’s SDK Manager. You can access the SDK Manager from the “Welcome to Android Studio” screen that pops up when you first open the application, under “Configure”. If you already have a project open, you can access it from Tools → SDK Manager.</p><p>Once you have the SDK Manager open, select the “SDK Platforms” tab, and then check the box for “Show Package Details”. Now expand the “Android 10 (Q)” section, and make sure the following subsections are checked:</p><ul><li><code>Android SDK Platform 29</code></li><li><code>Intel x86 Atom_64 System Image</code> or <code>Google APIs Intel x86 Atom System Image</code></li></ul><p>Next, select the “SDK Tools” tab, and check the box for “Show Package Details”. Expand the “Android SDK Build-Tools” section, and make sure that the “29.0.2” subsection is checked.</p><p>To finish the SDK Manager step, click “Apply” to download and install everything you’ve selected.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="enable-android-cli-commands">Enable Android CLI commands<a aria-hidden="true" class="hash-link" href="#enable-android-cli-commands" title="Direct link to heading">​</a></h3><p>You’ll need to append the following lines to your <code>~/.bash_profile</code> (or desired shell configuration file) in order for React Native to be able to build your Android project.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">export ANDROID_HOME=$HOME/Library/Android/sdk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export PATH=$PATH:$ANDROID_HOME/emulator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export PATH=$PATH:$ANDROID_HOME/tools</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export PATH=$PATH:$ANDROID_HOME/tools/bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export PATH=$PATH:$ANDROID_HOME/platform-tools</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Now either close and reopen your terminal window or re-source your shell configuration file in order to run the new commands:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">source ~/.bash_profile</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="codegen-for-grpc">Codegen for gRPC<a aria-hidden="true" class="hash-link" href="#codegen-for-grpc" title="Direct link to heading">​</a></h3><p>gRPC is a framework from Google for writing services. As a developer, you define your service&#x27;s API using Protobufs, and gRPC handles the networking and basic infrastructure for you.</p><p>The codegen for gRPC takes files written in the <a href="https://developers.google.com/protocol-buffers/docs/proto3" target="_blank" rel="noopener noreferrer">protocol buffers language</a> as input and outputs C++ code that enables a developer to create a client and a server that use gRPC for communication.</p><p>Because of C++ build dependencies, this could not be bundled as an npm package. <code>brew</code> also fails to install the required version so if you want to generate files in your local environment, you have to manually install Protobuf.</p><details class="details_Q743 alert alert--info details_h+cY" data-collapsed="true"><summary>Find yourself needing to modify the Protobuf schema files? (expand)</summary><div><div class="collapsibleContent_K5uX"><div><div>You&#x27;ll need to set up the tools to run the codegen. Follow the steps below:<br><ul><li><code>brew install autoconf automake libtool curl make g++ unzip</code></li><li><code>wget https://github.com/protocolbuffers/protobuf/releases/download/v3.15.8/protobuf-cpp-3.15.8.tar.gz</code></li><li><code>tar xfzv protobuf-cpp-3.15.8.tar.gz</code></li><li><code>cd protobuf-3.15.8</code></li><li><code>./configure</code></li><li><code>make</code></li><li><code>make check</code></li><li><code>make install</code></li></ul></div><br></div></div></div></details><p>After installing, you should be able to check the version of Protobuf like this: <code>protoc --version</code></p><p>After installing Protobuf, you will also need to install gRPC using <code>brew install grpc</code>. This will install the <code>grpc_cpp_plugin</code> for <code>protoc</code> (the Protobuf compiler), which is necessary for compiling gRPC schemas.</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>Please note that the order is crucial here - you have to first install Protobuf and only then gRPC. This is because otherwise gRPC will install Protobuf automatically from its dependency list, but the version of Protobuf will be incorrect.</p></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="arcanist">Arcanist<a aria-hidden="true" class="hash-link" href="#arcanist" title="Direct link to heading">​</a></h2><p>We use Phabricator for code review. To upload a “diff” to Phabricator, you’ll need to use a tool called Arcanist.</p><p>To install Arcanist, we’ll need to clone its Git repository. Pick a place in your filesystem to store it, and then run this command:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/phacility/arcanist.git</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Next, you’ll need to add the path <code>./arcanist/bin</code> to your <code>$PATH</code> in your <code>~/.bash_profile</code> (or desired shell configuration file):</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">export PATH=$PATH:~/src/arcanist/bin</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Make sure to replace the <code>~/src</code> portion of the above with the location of the directory you installed Arcanist in.</p><header><h1>Configuration</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="apache">Apache<a aria-hidden="true" class="hash-link" href="#apache" title="Direct link to heading">​</a></h2><p>In both dev and prod environments we have Node configured to run on port 3000, with Apache proxying it across to port 80. The reason for Apache is so that we can use other tech stacks alongside Node.</p><p>macOS comes with an Apache installation built in. We just need to configure it a little bit.</p><p>First, we’ll edit the main Apache configuration file.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">sudo vim /private/etc/apache2/httpd.conf</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The following individual lines each need to be uncommented:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">LoadModule proxy_module libexec/apache2/mod_proxy.so</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LoadModule proxy_http_module libexec/apache2/mod_proxy_http.so</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LoadModule proxy_wstunnel_module libexec/apache2/mod_proxy_wstunnel.so</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LoadModule userdir_module libexec/apache2/mod_userdir.so</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LoadModule php7_module libexec/apache2/libphp7.so</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Include /private/etc/apache2/extra/httpd-userdir.conf</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Next, we’ll edit the <code>http-userdir.conf</code> file.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">sudo vim /private/etc/apache2/extra/httpd-userdir.conf</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The following line needs to be uncommented:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">Include /private/etc/apache2/users/*.conf</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Now for the main course. We need to set up a configuration file for the current user.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">sudo vim /private/etc/apache2/users/$USER.conf</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;Directory &quot;/Users/ashoat/Sites/&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  AllowOverride All</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Options Indexes FollowSymLinks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Require all granted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/Directory&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;VirtualHost *:80&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ProxyRequests on</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ProxyPass /comm/ws ws://localhost:3000/ws</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ProxyPass /comm/ http://localhost:3000/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ProxyPass /commlanding/ http://localhost:3000/commlanding/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  RequestHeader set &quot;X-Forwarded-Proto&quot; expr=%{REQUEST_SCHEME}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  RequestHeader set &quot;X-Forwarded-SSL&quot; expr=%{HTTPS}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/VirtualHost&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Make sure to replace “ashoat” on the first line above with your macOS user.</p><p>You’ll also want to make sure that Apache can read your new file.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">sudo chmod 644 /private/etc/apache2/users/$USER.conf</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Finally, let’s restart Apache so it picks up the changes.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apachectl restart</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>If you end up installing a macOS update you should go through the Apache configuration section again, as your Apache config in <code>httpd.conf</code> may have been restored to the default.</p></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="mysql-1">MySQL<a aria-hidden="true" class="hash-link" href="#mysql-1" title="Direct link to heading">​</a></h2><p>Next we’ll set up a MySQL user and a fresh database. We’ll start by opening up a MySQL console.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">mysql -u root -p</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Type in the MySQL root password you set up previously when prompted. Then, we’ll go ahead and create an empty database.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">CREATE DATABASE comm;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Now we need to create a user that can access this database. For the following command, replace “password” with a unique password.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">CREATE USER comm@localhost IDENTIFIED BY &#x27;password&#x27;;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Finally, we will give permissions to this user to access this database.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">GRANT ALL ON comm.* TO comm@localhost;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You can now exit the MySQL console using Ctrl+D.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="mysql-administration-platform">MySQL administration platform<a aria-hidden="true" class="hash-link" href="#mysql-administration-platform" title="Direct link to heading">​</a></h2><p>Feel free to use a MySQL administration platform that you&#x27;re comfortable with. PHP was deprecated in macOS 12 (Monterey), leading some of us to switch to <a href="https://tableplus.com/" target="_blank" rel="noopener noreferrer">TablePlus</a>.</p><p>After installing TablePlus, you need to open a new connection. After opening TablePlus, click the &quot;Create a new connection&quot; text at the bottom of the window that appears.</p><ul><li>Alternatively, you can navigate through Connection → New... in the menu at the top of the display.</li></ul><p>Choose MySQL from the database options that appear. You&#x27;ll be prompted for:</p><ul><li>Name (Comm)</li><li>Host (localhost)</li><li>Port (3306 by default)</li><li>User (comm)</li><li>Password (the one you made when initializing the MySQL server in the previous step)</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="android-emulator">Android emulator<a aria-hidden="true" class="hash-link" href="#android-emulator" title="Direct link to heading">​</a></h2><p>In order to test the Android app on your computer you’ll need to set up an Android emulator. To do this we’ll need to open up the AVD Manager in Android Studio. AVD stands for “Android Virtual Device”. You can access the AVD Manager from the “Welcome to Android Studio” screen that pops up when you first open the application, under “Configure”. If you already have a project open, you can access it from Tools → AVD Manager.</p><p>With the the AVD Manager open, select “Create Virtual Device” on the bottom row. Feel free to select any “device definition” that includes Play Store support.</p><p>On the next screen you’ll be asked to select a system image. Go for the latest version of Android that has been released. That’s currently Android 10, also known as Android Q.</p><p>From there you can just hit Next and then Finish. You should then be able to start your new AVD from the AVD Manager.</p><header><h1>Git repo</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="clone-from-github">Clone from GitHub<a aria-hidden="true" class="hash-link" href="#clone-from-github" title="Direct link to heading">​</a></h2><p>Finally! It’s time to clone the repo from GitHub.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">git clone git@github.com:CommE2E/comm.git</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Once you have the repo cloned, you can run this command to pull in dependencies.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">cd comm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yarn cleaninstall</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="urls">URLs<a aria-hidden="true" class="hash-link" href="#urls" title="Direct link to heading">​</a></h2><p>The server needs to know some info about paths in order to properly construct URLs.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p server/facts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vim server/facts/url.json</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Your <code>url.json</code> file should look like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI json"><pre tabindex="0" class="prism-code language-json codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;baseRoutePath&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Next, we’ll create a file for constructing URLs for the main app.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">vim server/facts/app_url.json</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Your <code>app_url.json</code> file should look like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI json"><pre tabindex="0" class="prism-code language-json codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;baseDomain&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;http://localhost&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;basePath&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/comm/&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;https&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Finally, we’ll create a file for the URLs in the landing page.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">vim server/facts/landing_url.json</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Your <code>landing_url.json</code> file should look like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI json"><pre tabindex="0" class="prism-code language-json codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;baseDomain&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;http://localhost&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;basePath&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/commlanding/&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;baseRoutePath&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/commlanding/&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;https&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="mysql-2">MySQL<a aria-hidden="true" class="hash-link" href="#mysql-2" title="Direct link to heading">​</a></h2><p>The server side needs to see some config files before things can work. The first is a config file with MySQL details.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">cd server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir secrets</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vim secrets/db_config.json</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The DB config file should look like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI json"><pre tabindex="0" class="prism-code language-json codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;host&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;localhost&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;user&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;comm&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;password&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;database&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;comm&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Make sure to replace the password with the one you set up for your <code>comm</code> MySQL user earlier.</p><p>New let’s run a script to setup the database. Before we can run the script, we’ll have to use Babel to transpile our source files into something Node can interpret. Babel will transpile the files in <code>src</code> into a new directory called <code>dist</code>. We also use <code>rsync</code> to copy over files that don’t need transpilation.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">yarn babel-build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yarn rsync</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yarn script dist/scripts/create-db.js</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="phabricator">Phabricator<a aria-hidden="true" class="hash-link" href="#phabricator" title="Direct link to heading">​</a></h2><p>The last configuration step is to set up an account on Phabricator, where we handle code review. Start by <a href="https://phabricator.ashoat.com" target="_blank" rel="noopener noreferrer">logging in to Phabricator</a> using your GitHub account.</p><p>Next, make sure you’re inside the directory containing the Comm Git repository, and run the following command:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">arc install-certificate</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This command will help you connect your Phabricator account with the local Arcanist instance, allowing you to run <code>arc diff</code> and <code>arc land</code> commands.</p><header><h1>Development</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="flow-typechecker">Flow typechecker<a aria-hidden="true" class="hash-link" href="#flow-typechecker" title="Direct link to heading">​</a></h2><p>It’s good to run the <code>flow</code> typechecker frequently to make sure you’re not introducing any type errors. Flow treats each Yarn Workspace as a separate environment, and as such runs a separate type-checking server for each. This server is started when you first run <code>node_modules/.bin/flow</code> in each of the four Yarn Workspace folders.</p><p>To make sure Flow runs from the command-line, you can edit your <code>$PATH</code> environmental variable in your <code>~/.bash_profile</code> file (or desired shell configuration file) to always include <code>./node_modules/.bin</code>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">export PATH=$PATH:./node_modules/.bin</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>As always, make sure you reload the <code>~/.bash_profile</code> after editing it:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">source ~/.bash_profile</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You should now be able to run <code>flow</code> in any of the Yarn workspaces:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">cd lib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flow</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="running-web-app">Running web app<a aria-hidden="true" class="hash-link" href="#running-web-app" title="Direct link to heading">​</a></h2><p>Open a new terminal and run:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">cd web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yarn dev</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This will start two processes. One is <code>webpack-dev-server</code>, which will serve the JS files. <code>webpack-dev-server</code> also makes sure the website automatically hot-reloads whenever any of the source files change. The other process is <code>webpack --watch</code>, which will build the <code>app.build.cjs</code> file, as well as rebuilding it whenever any of the source files change. The <code>app.build.cjs</code> file is consumed by the Node server in order to pre-render the initial HTML from the web source (“Server-Side Rendering”).</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="running-landing-page">Running landing page<a aria-hidden="true" class="hash-link" href="#running-landing-page" title="Direct link to heading">​</a></h2><p>Open a new terminal and run:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">cd landing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yarn dev</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This runs the same two processes as the web app, but for the landing page. Note that the <code>landing.build.cjs</code> file (similar to the web app’s <code>app.build.cjs</code> file) is consumed by the Node server.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="running-server">Running server<a aria-hidden="true" class="hash-link" href="#running-server" title="Direct link to heading">​</a></h2><p>Open a new terminal and run:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">cd server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yarn dev</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You should now be able to load the web app in your web browser at http://localhost/comm/, and the landing page at http://localhost/commlanding/.</p><p>This command runs three processes. The first two are to keep the <code>dist</code> folder updated whenever the <code>src</code> folder changes. They are “watch” versions of the same Babel and <code>rsync</code> commands we used to initially create the <code>dist</code> folder (before running the <code>create-db.js</code> script above). The final process is <code>nodemon</code>, which is similar to <code>node</code> except that it restarts whenever any of its source files (in the <code>dist</code> directory) changes.</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>If you run <code>yarn dev</code> in <code>server</code> right after <code>yarn cleaninstall</code>, before Webpack is given a chance to build <code>app.build.cjs</code>/<code>landing.build.cjs</code> files, then Node will crash when it attempts to import those files. Just make sure to run <code>yarn dev</code> (or <code>yarn prod</code>) in <code>web</code> or <code>landing</code> before attempting to load the corresponding webpages.</p></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="running-ios">Running iOS<a aria-hidden="true" class="hash-link" href="#running-ios" title="Direct link to heading">​</a></h2><p>First, make sure that the React Native packager is open. If you haven’t already, open a new terminal and run:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">cd native</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yarn dev</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This command runs two processes. The first is the Metro bundler, which handles bundling our app’s JavaScript code and communicating with the debug build of the app running on either the simulator or a physical device. The second is the <code>remotedev-server</code> for Redux, which is a proxy of sorts through which the Redux monitor (running in the Chrome extension) can communicate with the debug build of the app.</p><p>Next, open <code>native/ios/Comm.xcworkspace</code> in Xcode. Select a simulator and then hit the play button to build and run the project.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="running-android">Running Android<a aria-hidden="true" class="hash-link" href="#running-android" title="Direct link to heading">​</a></h2><p>First, make sure that the React Native packager is open. If you haven’t already, open a new terminal and run:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">cd native</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yarn dev</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This commands runs two processes (see previous section for details).</p><p>Next, boot up an Android simulator using Android Studio’s AVD Manager. You should have a single Android simulator (or plugged-in device) running at one time.</p><p>Finally, use this command to build and run the Android app:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">cd native</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yarn react-native run-android</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="running-node-scripts">Running Node scripts<a aria-hidden="true" class="hash-link" href="#running-node-scripts" title="Direct link to heading">​</a></h2><p>To run one of the scripts in <code>server/src/scripts</code>, you should start by making sure that the Node server is running. If you haven’t already, open a new terminal and run:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">cd native</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yarn dev</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Then, from the <code>server</code> directory, run <code>yarn script dist/scripts/name.js</code>, where <code>name.js</code> is the file containing the script.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="codegen">Codegen<a aria-hidden="true" class="hash-link" href="#codegen" title="Direct link to heading">​</a></h2><p>We use a couple of tools that automatically generate code. </p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>There is always a source of truth – usually some file(s) with schemas.</p></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="codegen-for-jsi">Codegen for JSI<a aria-hidden="true" class="hash-link" href="#codegen-for-jsi" title="Direct link to heading">​</a></h3><p>JSI is a framework in React Native that allows C++ and JS to communicate synchronously and directly. The codegen for JSI takes a Flow schema and generates C++ files that enable communication between JS and C++ in <code>react-native</code> apps.</p><p>The script to generate this code is written in JavaScript and is included as a npm package so no additional software is needed to use it. The schema has to be defined in Flow as an interface, and that interface must inherit from react-native&#x27;s <code>TurboModule</code> interface.</p><p>To run the JSI codegen, just run <code>cd native &amp;&amp; yarn codegen-jsi</code>. The input Flow schemas are located in <code>native/schema</code>.</p><header><h1>Debugging</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="react-developer-tools">React Developer Tools<a aria-hidden="true" class="hash-link" href="#react-developer-tools" title="Direct link to heading">​</a></h2><ul><li>For web, you can access the React Developer Tools through the Chrome extension by opening the Chrome Developer Tools and selecting the “Components” or “Profiler” tabs. This should work in both our development environment and in production.</li><li>For iOS and Android, you can access the React Developer Tools through Flipper. First start a debug build of a React Native app. Next, just open up Flipper and you should be able to see an option for “React DevTools”. Flipper communicates with the app through the Metro bundler that gets started when you run <code>cd native &amp;&amp; yarn dev</code>.</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="redux-developer-tools">Redux Developer Tools<a aria-hidden="true" class="hash-link" href="#redux-developer-tools" title="Direct link to heading">​</a></h2><ul><li>For web, you can access the Redux Developer Tools through the Chrome extension by opening the Chrome Developer Tools and selecting the “Redux” tab. This should work in both our development environment and in production, although in production you won’t be able to see Redux actions from before you opened up the Redux dev tools.</li><li>For iOS and Android, you can access the Redux Developer Tools through the Chrome extension’s Remote DevTools functionality. First, to open the Remote DevTools, right click on any webpage, go into the “Redux DevTools” menu, and select “Open Remote DevTools”. Then hit “Settings”, select “Use custom (local) server”, and configure it to connect to <code>localhost</code> on port 8043. This will connect to the <code>remotedev-server</code> instance that you started when you ran <code>cd native &amp;&amp; yarn dev</code>.</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="debugging-javascript">Debugging JavaScript<a aria-hidden="true" class="hash-link" href="#debugging-javascript" title="Direct link to heading">​</a></h2><ul><li>For web, you can just use your browser of choice’s dev tools.</li><li>For iOS and Android, you should use Flipper. First start a debug build of a React Native app. Next, just open up Flipper and you should be able to see an option for “Hermes Debugger (RN)”. Flipper communicates with the app through the Metro bundler that gets started when you run <code>cd native &amp;&amp; yarn dev</code>.</li></ul><header><h1>Working with Phabricator</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="creating-a-new-diff">Creating a new diff<a aria-hidden="true" class="hash-link" href="#creating-a-new-diff" title="Direct link to heading">​</a></h2><p>The biggest difference between GitHub’s PR workflow and Phabricator’s “diff” workflow is that Phabricator lets you create a diff from any commit, or set of commits. In contrast, GitHub can only create PRs from branches.</p><p>When you have a commit ready and want to submit a diff for code review, just run <code>arc diff</code> from within the Comm Git repo. Arcanist will attempt to determine the “base” for your diff automatically, but by default it will take the single most recent commit. You can see what base Arcanist thinks it should use by running <code>arc which</code>. You can also explicitly specify a base by using <code>arc diff --base</code>. For instance, <code>arc diff --base HEAD^</code> will create a diff from the most recent commit, which should be the default behavior.</p><p>Keep in mind that <code>arc diff</code> always diffs the base against your current working copy. Though this nominally includes any unstashed changes you might have, <code>arc diff</code>’s interactive prompts will help you exclude unrelated changes in your working copy.</p><p>It’s generally easiest to keep a 1:1 correspondence between diffs and commits. If you’re working with a stack of commits, you can use Git’s interactive rebase feature (<code>git rebase -i</code>) to run <code>arc diff</code> on each commit individually.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="updating-a-diff">Updating a diff<a aria-hidden="true" class="hash-link" href="#updating-a-diff" title="Direct link to heading">​</a></h2><p>Whereas with GitHub PRs, updates are usually created by adding on more commits, in Phabricator the easiest way to update a diff is by amending the existing commit.</p><p>When you run <code>arc diff</code> on a commit for the first time, it amends the commit message to include a link to the Phabricator diff. If and when you want to update that diff, just run <code>arc diff</code> again.</p><p>If you’re working with a stack of diffs, and want to update an earlier diff, you can use Git’s interactive rebase feature (<code>git rebase -i</code>) to open the stack to a particular point. Then you can amend that commit and run <code>arc diff</code> before continuing the rebase.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="committing-a-diff">Committing a diff<a aria-hidden="true" class="hash-link" href="#committing-a-diff" title="Direct link to heading">​</a></h2><p>After your diff has been accepted, you should be able to land it. To land a diff just run <code>arc land</code> from within the repository.</p><p>If you’re dealing with a stack, <code>arc land</code> will make sure to only land the diffs that have been accepted, and shouldn’t land any diffs that depend on other diffs that haven’t been accepted yet.</p><p>Note that you need commit rights to the repository in order to run <code>arc land</code>. If you don’t have commit rights, reach out to @ashoat for assistance.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="creating-a-herald-rule">Creating a Herald rule<a aria-hidden="true" class="hash-link" href="#creating-a-herald-rule" title="Direct link to heading">​</a></h2><p>Once you have access to Phabricator, you may want to set up a Herald rule so that you get CC’d on any new diffs. The way to do that in Phabricator is:</p><ol><li>Go to “More Applications” on the left-hand sidebar.</li><li>Select “Herald” from the list.</li><li>Press the “Create Herald Rule” button in the upper-right corner of the screen.</li><li>Select “Differential Revisions” from the list.</li><li>Select “Personal Rule” from the list.</li><li>Set up your new rule to match <a href="https://phabricator.ashoat.com/H2" target="_blank" rel="noopener noreferrer">this one</a>.</li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="final-notes">Final notes<a aria-hidden="true" class="hash-link" href="#final-notes" title="Direct link to heading">​</a></h2><p>When developing, I usually just pop up three terminal windows, one for <code>yarn dev</code> in each of server, web, and native.</p><p>Note that it’s currently only possible to create a user account using the iOS or Android apps. The website supports logging in, but does not support account creation.</p><p>Good luck, and let <a href="mailto:support@comm.app" target="_blank" rel="noopener noreferrer">@commsupport</a> know if you have any questions!</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« <!-- -->Requirements</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/linux_dev_environment"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Instructions (Linux)<!-- --> »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#xcode" class="table-of-contents__link toc-highlight">Xcode</a></li><li><a href="#homebrew" class="table-of-contents__link toc-highlight">Homebrew</a></li><li><a href="#node" class="table-of-contents__link toc-highlight">Node</a></li><li><a href="#php" class="table-of-contents__link toc-highlight">PHP</a></li><li><a href="#yarn" class="table-of-contents__link toc-highlight">Yarn</a></li><li><a href="#watchman" class="table-of-contents__link toc-highlight">Watchman</a></li><li><a href="#node-version-manager" class="table-of-contents__link toc-highlight">Node Version Manager</a></li><li><a href="#mysql" class="table-of-contents__link toc-highlight">MySQL</a></li><li><a href="#redis" class="table-of-contents__link toc-highlight">Redis</a></li><li><a href="#cocoapods" class="table-of-contents__link toc-highlight">CocoaPods</a></li><li><a href="#reactotron" class="table-of-contents__link toc-highlight">Reactotron</a></li><li><a href="#flipper" class="table-of-contents__link toc-highlight">Flipper</a><ul><li><a href="#flipper-plugins" class="table-of-contents__link toc-highlight">Flipper plugins</a></li></ul></li><li><a href="#idb" class="table-of-contents__link toc-highlight">idb</a></li><li><a href="#react-dev-tools-chrome-extension" class="table-of-contents__link toc-highlight">React Dev Tools Chrome extension</a></li><li><a href="#redux-dev-tools-chrome-extension" class="table-of-contents__link toc-highlight">Redux Dev Tools Chrome extension</a></li><li><a href="#jdk" class="table-of-contents__link toc-highlight">JDK</a></li><li><a href="#android-studio" class="table-of-contents__link toc-highlight">Android Studio</a><ul><li><a href="#android-sdk" class="table-of-contents__link toc-highlight">Android SDK</a></li><li><a href="#enable-android-cli-commands" class="table-of-contents__link toc-highlight">Enable Android CLI commands</a></li><li><a href="#codegen-for-grpc" class="table-of-contents__link toc-highlight">Codegen for gRPC</a></li></ul></li><li><a href="#arcanist" class="table-of-contents__link toc-highlight">Arcanist</a></li><li><a href="#apache" class="table-of-contents__link toc-highlight">Apache</a></li><li><a href="#mysql-1" class="table-of-contents__link toc-highlight">MySQL</a></li><li><a href="#mysql-administration-platform" class="table-of-contents__link toc-highlight">MySQL administration platform</a></li><li><a href="#android-emulator" class="table-of-contents__link toc-highlight">Android emulator</a></li><li><a href="#clone-from-github" class="table-of-contents__link toc-highlight">Clone from GitHub</a></li><li><a href="#urls" class="table-of-contents__link toc-highlight">URLs</a></li><li><a href="#mysql-2" class="table-of-contents__link toc-highlight">MySQL</a></li><li><a href="#phabricator" class="table-of-contents__link toc-highlight">Phabricator</a></li><li><a href="#flow-typechecker" class="table-of-contents__link toc-highlight">Flow typechecker</a></li><li><a href="#running-web-app" class="table-of-contents__link toc-highlight">Running web app</a></li><li><a href="#running-landing-page" class="table-of-contents__link toc-highlight">Running landing page</a></li><li><a href="#running-server" class="table-of-contents__link toc-highlight">Running server</a></li><li><a href="#running-ios" class="table-of-contents__link toc-highlight">Running iOS</a></li><li><a href="#running-android" class="table-of-contents__link toc-highlight">Running Android</a></li><li><a href="#running-node-scripts" class="table-of-contents__link toc-highlight">Running Node scripts</a></li><li><a href="#codegen" class="table-of-contents__link toc-highlight">Codegen</a><ul><li><a href="#codegen-for-jsi" class="table-of-contents__link toc-highlight">Codegen for JSI</a></li></ul></li><li><a href="#react-developer-tools" class="table-of-contents__link toc-highlight">React Developer Tools</a></li><li><a href="#redux-developer-tools" class="table-of-contents__link toc-highlight">Redux Developer Tools</a></li><li><a href="#debugging-javascript" class="table-of-contents__link toc-highlight">Debugging JavaScript</a></li><li><a href="#creating-a-new-diff" class="table-of-contents__link toc-highlight">Creating a new diff</a></li><li><a href="#updating-a-diff" class="table-of-contents__link toc-highlight">Updating a diff</a></li><li><a href="#committing-a-diff" class="table-of-contents__link toc-highlight">Committing a diff</a></li><li><a href="#creating-a-herald-rule" class="table-of-contents__link toc-highlight">Creating a Herald rule</a></li><li><a href="#final-notes" class="table-of-contents__link toc-highlight">Final notes</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/dev_environment">Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://comm.app/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/CommE2E/comm" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/commdotapp" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://comm.app/support" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Support<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://comm.app/terms" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Terms of Use<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://comm.app/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Privacy Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Comm Technologies, Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.240d7005.js"></script>
<script src="/assets/js/main.979eff03.js"></script>
</body>
</html>